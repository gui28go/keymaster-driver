<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>White Glass Workspace</title>
    <style>
        :root {
            /* Palette: White & Grayscale Only */
            --bg-body: #f4f4f4;
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.9);
            --surface: #ffffff;
            --text-main: #111111;
            --text-sec: #666666;
            --border-light: #e5e5e5;
            --focus-ring: #999999;
            --shadow-soft: 0 10px 40px -10px rgba(0,0,0,0.05);
        }


        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }


        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg-body);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            overflow: hidden; /* Scroll handled inside containers */
        }


        /* --- LAYOUT STRUCTURE (PC FIRST) --- */
        .app-wrapper {
            display: flex;
            width: 100%;
            height: 100%;
        }


        /* Sidebar for PC */
        .sidebar {
            width: 250px;
            background: var(--surface);
            border-right: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
            padding: 30px 20px;
            z-index: 10;
        }


        .brand {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 40px;
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }


        .nav-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }


        .nav-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.2s;
            color: var(--text-sec);
            font-size: 0.95rem;
            background: transparent;
            border: none;
            text-align: left;
        }


        .nav-btn:hover { background: #f9f9f9; color: var(--text-main); }
        .nav-btn.active { background: #eeeeee; color: var(--text-main); font-weight: 600; }
        .nav-btn svg { width: 20px; height: 20px; fill: currentColor; }


        /* Main Content */
        .main-content {
            flex: 1;
            position: relative;
            overflow-y: auto;
            padding: 40px;
            scroll-behavior: smooth;
        }


        .container {
            max-width: 900px;
            margin: 0 auto;
            padding-bottom: 100px; /* Space for mobile nav */
        }


        /* --- MOBILE ADAPTATION --- */
        @media (max-width: 768px) {
            .app-wrapper { flex-direction: column; }
            .sidebar {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                height: auto;
                flex-direction: row;
                justify-content: space-around;
                padding: 10px;
                border-right: none;
                border-top: 1px solid var(--border-light);
                background: rgba(255,255,255,0.9);
                backdrop-filter: blur(10px);
            }
            .brand { display: none; }
            .nav-links {
                flex-direction: row;
                justify-content: space-around;
                width: 100%;
                gap: 0;
            }
            .nav-btn {
                flex-direction: column;
                padding: 5px;
                font-size: 0.7rem;
                gap: 5px;
            }
            .nav-btn span { display: block; }
            .main-content { padding: 20px; height: 100%; }
        }


        /* --- COMPONENTS --- */
        
        /* Glass Card */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-soft);
            transition: transform 0.2s;
        }


        h2 { margin: 0 0 20px 0; font-weight: 600; font-size: 1.1rem; letter-spacing: -0.3px; opacity: 0.8; }


        /* Forms */
        input, select, textarea {
            width: 100%;
            padding: 12px 0;
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--border-light);
            font-size: 1rem;
            color: var(--text-main);
            margin-bottom: 15px;
            border-radius: 0;
            transition: 0.3s;
        }
        input:focus, textarea:focus { border-bottom: 1px solid var(--text-main); }
        
        /* Buttons - Minimalist Black/White */
        button {
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: 0.2s;
        }


        .btn-primary {
            background: var(--text-main);
            color: white;
            border: 1px solid var(--text-main);
            width: 100%;
        }
        .btn-primary:hover { opacity: 0.9; }


        .btn-outline {
            background: transparent;
            border: 1px solid var(--border-light);
            color: var(--text-main);
            width: 100%;
        }
        .btn-outline:hover { border-color: var(--text-main); }


        .btn-sm { padding: 5px 10px; font-size: 0.8rem; width: auto; }
        .btn-delete { color: #999; background: transparent; border: none; padding: 5px; }
        .btn-delete:hover { color: #000; }


        /* Icon Grid */
        .icon-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(40px, 1fr)); gap: 10px; margin: 15px 0; }
        .icon-opt { 
            height: 40px; display: flex; align-items: center; justify-content: center; 
            border: 1px solid transparent; border-radius: 6px; cursor: pointer; opacity: 0.5;
        }
        .icon-opt:hover, .icon-opt.selected { opacity: 1; border-color: var(--text-main); background: #fff; }
        .icon-opt svg { width: 20px; height: 20px; fill: var(--text-main); }


        /* Lists */
        .list-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .list-item:last-child { border-bottom: none; }
        
        /* Tasks */
        .task-row { display: flex; align-items: center; gap: 15px; width: 100%; }
        .check-circle {
            width: 20px; height: 20px;
            border: 2px solid var(--border-light);
            border-radius: 50%;
            cursor: pointer;
            flex-shrink: 0;
            transition: 0.2s;
        }
        .check-circle.checked { border-color: var(--text-main); background: var(--text-main); }
        .task-text { flex: 1; font-size: 0.95rem; }
        .task-done { text-decoration: line-through; opacity: 0.4; }


        /* Links & Docs */
        .link-content { display: flex; align-items: center; gap: 15px; text-decoration: none; color: inherit; flex: 1; }
        .link-icon-box { 
            width: 40px; height: 40px; background: #f9f9f9; 
            display: flex; align-items: center; justify-content: center; 
            border-radius: 8px; flex-shrink: 0;
        }


        /* Credentials */
        .cred-details { font-size: 0.85rem; color: var(--text-sec); margin-top: 5px; }
        .cred-extra-row { display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px dashed #eee; }


        /* Utilities */
        .section { display: none; animation: fadeIn 0.3s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        details summary { cursor: pointer; font-size: 0.8rem; color: var(--text-sec); margin-bottom: 10px; }


    </style>
</head>
<body>


    <div class="app-wrapper">
        <nav class="sidebar">
            <div class="brand">
                <svg viewBox="0 0 24 24" width="24" height="24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>
                Minimal
            </div>
            <div class="nav-links">
                <button class="nav-btn active" onclick="switchTab('activities')">
                    <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.89 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                    <span>Atividades</span>
                </button>
                <button class="nav-btn" onclick="switchTab('links')">
                    <svg viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
                    <span>Links</span>
                </button>
                <button class="nav-btn" onclick="switchTab('credentials')">
                    <svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
                    <span>Senhas</span>
                </button>
                <button class="nav-btn" onclick="switchTab('documents')">
                    <svg viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"/></svg>
                    <span>Docs</span>
                </button>
                <button class="nav-btn" onclick="switchTab('import')">
                    <svg viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
                    <span>Dados</span>
                </button>
            </div>
        </nav>


        <main class="main-content">
            <div class="container">
                
                <div id="activities" class="section active">
                    <div class="glass-card">
                        <h2>Adicionar Tarefa</h2>
                        <div style="display:flex; gap:10px; align-items:flex-end;">
                            <div style="flex:1">
                                <input type="text" id="actInput" placeholder="Descrição da tarefa">
                                <input type="date" id="actDate" style="font-size: 0.8rem; color:#666; margin-bottom:0;">
                            </div>
                            <button class="btn-primary" onclick="addActivity()" style="width:auto; height: 50px;">+</button>
                        </div>
                    </div>
                    <div id="activitiesList" class="glass-card" style="padding-top:0; padding-bottom:0;"></div>
                </div>


                <div id="links" class="section">
                    <div class="glass-card">
                        <h2>Novo Link</h2>
                        <input type="text" id="linkTitle" placeholder="Título">
                        <input type="url" id="linkUrl" placeholder="URL (https://)">
                        
                        <p style="font-size:0.8rem; color:#666; margin-top:10px;">Ícone</p>
                        <div class="icon-grid" id="linkIconGrid"></div>
                        <details>
                            <summary>Usar SVG Personalizado</summary>
                            <textarea id="linkCustomSvg" rows="2" placeholder="Cole o código <svg> aqui"></textarea>
                        </details>
                        
                        <button class="btn-primary" onclick="addLink()">Salvar</button>
                    </div>
                    <div id="linksList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px;"></div>
                </div>


                <div id="credentials" class="section">
                    <div class="glass-card">
                        <h2>Nova Credencial</h2>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap:15px;">
                            <input type="text" id="credName" placeholder="Serviço (ex: Netflix)">
                            <input type="text" id="credPhone" placeholder="Telefone">
                        </div>
                        <input type="email" id="credEmail" placeholder="Email / ID">
                        
                        <div id="extraFieldsContainer"></div>
                        <button class="btn-outline btn-sm" onclick="addExtraFieldInput()" style="margin-bottom:15px; border-style:dashed;">+ Adicionar Campo (Senha, PIN)</button>
                        
                        <button class="btn-primary" onclick="addCredential()">Salvar</button>
                    </div>
                    <div id="credentialsList"></div>
                </div>


                <div id="documents" class="section">
                    <div class="glass-card">
                        <h2>Anexar Documento</h2>
                        <input type="text" id="docTitle" placeholder="Nome do arquivo">
                        <input type="url" id="docUrl" placeholder="Link da nuvem">
                        <div class="icon-grid" id="docIconGrid"></div>
                        <button class="btn-primary" onclick="addDocument()">Salvar</button>
                    </div>
                    <div id="documentsList" class="glass-card" style="padding: 10px;"></div>
                </div>


                <div id="import" class="section">
                    <div class="glass-card">
                        <h2>Backup & Restauração</h2>
                        <p style="color:#666; font-size: 0.9rem;">Baixe seus dados (JSON) ou restaure um backup.</p>
                        <div style="display:flex; gap:10px; margin-top:15px;">
                            <button class="btn-outline" onclick="exportData()">Baixar Dados</button>
                            <button class="btn-outline" onclick="document.getElementById('importFile').click()">Restaurar</button>
                            <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData()">
                        </div>
                    </div>


                    <div class="glass-card">
                        <h2>Compartilhar via Email</h2>
                        <textarea id="emailTemplate" rows="4" readonly style="background:#f9f9f9; padding:10px; border:none; resize:none; font-size:0.85rem;"></textarea>
                        <button class="btn-primary" onclick="copyEmail()">Copiar Texto</button>
                    </div>
                </div>


            </div>
        </main>
    </div>


<script>
    // --- ICON SYSTEM (Minimal Lines) ---
    const iconPaths = [
        "M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z", // Grid
        "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z", // User
        "M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z", // Mail
        "M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z", // Shield
        "M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zM12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z", // Clock
        "M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z", // Article
        "M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z", // Link
        "M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zm6 3h1v-1h-1v1z", // PDF
        "M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z", // Share/Node
        "M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z" // Building
    ];


    // --- STATE ---
    let appData = { activities: [], links: [], credentials: [], documents: [] };
    let selectedIconIndex = 0;


    // --- INIT ---
    window.onload = () => {
        const saved = localStorage.getItem('whiteGlassData');
        if (saved) appData = JSON.parse(saved);
        renderAll();
        generateIconGrids();
        
        // Setup default email text
        updateEmailTemplate();
    };


    function switchTab(id) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        // Find button by logic or index. Simple loop:
        const btns = document.querySelectorAll('.nav-btn');
        const map = { 'activities':0, 'links':1, 'credentials':2, 'documents':3, 'import':4 };
        if(btns[map[id]]) btns[map[id]].classList.add('active');
    }


    function saveData() {
        localStorage.setItem('whiteGlassData', JSON.stringify(appData));
    }


    function getSvg(path, size=20) {
        return `<svg viewBox="0 0 24 24" width="${size}" height="${size}" fill="currentColor"><path d="${path}"/></svg>`;
    }


    function generateIconGrids() {
        const fillGrid = (id) => {
            const el = document.getElementById(id);
            el.innerHTML = '';
            iconPaths.forEach((path, i) => {
                const div = document.createElement('div');
                div.className = `icon-opt ${i === 0 ? 'selected' : ''}`;
                div.innerHTML = getSvg(path);
                div.onclick = () => {
                    el.querySelectorAll('.icon-opt').forEach(d => d.classList.remove('selected'));
                    div.classList.add('selected');
                    selectedIconIndex = i;
                };
                el.appendChild(div);
            });
        };
        fillGrid('linkIconGrid');
        fillGrid('docIconGrid');
    }


    function renderAll() {
        renderActivities();
        renderLinks();
        renderCredentials();
        renderDocuments();
    }


    // --- ACTIVITIES ---
    function addActivity() {
        const txt = document.getElementById('actInput').value;
        const date = document.getElementById('actDate').value;
        if(!txt) return;
        appData.activities.push({ id: Date.now(), text: txt, date: date, done: false });
        document.getElementById('actInput').value = '';
        saveData();
        renderActivities();
    }
    function toggleAct(id) {
        const item = appData.activities.find(i => i.id === id);
        if(item) item.done = !item.done;
        saveData();
        renderActivities();
    }
    function delAct(id) {
        appData.activities = appData.activities.filter(i => i.id !== id);
        saveData();
        renderActivities();
    }
    function renderActivities() {
        const list = document.getElementById('activitiesList');
        list.innerHTML = '';
        if(appData.activities.length === 0) list.innerHTML = '<div style="padding:20px; text-align:center; color:#999; font-size:0.9rem;">Nenhuma atividade pendente.</div>';
        
        appData.activities.forEach(i => {
            const div = document.createElement('div');
            div.className = 'list-item';
            div.style.padding = '15px';
            div.innerHTML = `
                <div class="task-row">
                    <div class="check-circle ${i.done ? 'checked' : ''}" onclick="toggleAct(${i.id})"></div>
                    <div class="task-text ${i.done ? 'task-done' : ''}">
                        ${i.text}
                        ${i.date ? `<div style="font-size:0.75rem; color:#999;">${i.date}</div>` : ''}
                    </div>
                    <button class="btn-delete" onclick="delAct(${i.id})">×</button>
                </div>
            `;
            list.appendChild(div);
        });
    }


    // --- LINKS ---
    function addLink() {
        const title = document.getElementById('linkTitle').value;
        const url = document.getElementById('linkUrl').value;
        const custom = document.getElementById('linkCustomSvg').value;
        if(!title || !url) return;
        
        let icon = iconPaths[selectedIconIndex];
        let isCustom = false;
        if(custom.trim()) { icon = custom; isCustom = true; }


        appData.links.push({ id: Date.now(), title, url, icon, isCustom });
        document.getElementById('linkTitle').value = '';
        document.getElementById('linkUrl').value = '';
        document.getElementById('linkCustomSvg').value = '';
        saveData();
        renderLinks();
    }
    function renderLinks() {
        const list = document.getElementById('linksList');
        list.innerHTML = '';
        appData.links.forEach(i => {
            const div = document.createElement('div');
            div.className = 'glass-card';
            div.style.margin = '0';
            div.style.display = 'flex';
            div.style.alignItems = 'center';
            div.style.padding = '15px';
            
            let iconHtml = i.isCustom ? i.icon : getSvg(i.icon, 24);
            if(i.isCustom && !i.icon.includes('width')) iconHtml = i.icon.replace('<svg', '<svg width="24" height="24"');


            div.innerHTML = `
                <a href="${i.url}" target="_blank" class="link-content">
                    <div class="link-icon-box">${iconHtml}</div>
                    <span style="font-weight:600">${i.title}</span>
                </a>
                <button class="btn-delete" onclick="delLink(${i.id})">×</button>
            `;
            list.appendChild(div);
        });
    }
    function delLink(id) {
        appData.links = appData.links.filter(i => i.id !== id);
        saveData();
        renderLinks();
    }


    // --- CREDENTIALS ---
    let tempFields = [];
    function addExtraFieldInput() {
        const c = document.getElementById('extraFieldsContainer');
        const id = Date.now();
        const div = document.createElement('div');
        div.style.display='flex'; div.style.gap='10px'; div.style.marginBottom='5px';
        div.innerHTML = `
            <input id="lbl-${id}" placeholder="Nome (Ex: PIN)" style="width:40%">
            <input id="val-${id}" placeholder="Valor" style="width:60%">
        `;
        c.appendChild(div);
        tempFields.push(id);
    }
    function addCredential() {
        const name = document.getElementById('credName').value;
        const email = document.getElementById('credEmail').value;
        const phone = document.getElementById('credPhone').value;
        if(!name) return;


        let extras = [];
        tempFields.forEach(tid => {
            const l = document.getElementById(`lbl-${tid}`).value;
            const v = document.getElementById(`val-${tid}`).value;
            if(l && v) extras.push({ l, v });
        });


        appData.credentials.push({ id:Date.now(), name, email, phone, extras });
        document.getElementById('credName').value = '';
        document.getElementById('credEmail').value = '';
        document.getElementById('credPhone').value = '';
        document.getElementById('extraFieldsContainer').innerHTML = '';
        tempFields = [];
        saveData();
        renderCredentials();
    }
    function renderCredentials() {
        const list = document.getElementById('credentialsList');
        list.innerHTML = '';
        appData.credentials.forEach(i => {
            let exHtml = i.extras.map(e => `
                <div class="cred-extra-row"><span>${e.l}</span><span style="font-family:monospace">${e.v}</span></div>
            `).join('');


            const div = document.createElement('div');
            div.className = 'glass-card';
            div.innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:flex-start">
                    <h3 style="margin:0; font-size:1rem">${i.name}</h3>
                    <button class="btn-delete" onclick="delCred(${i.id})">×</button>
                </div>
                <div class="cred-details">
                    ${i.email ? `<div>ID: ${i.email}</div>` : ''}
                    ${i.phone ? `<div>Tel: ${i.phone}</div>` : ''}
                </div>
                <div style="margin-top:10px; font-size:0.85rem">${exHtml}</div>
            `;
            list.appendChild(div);
        });
    }
    function delCred(id) {
        appData.credentials = appData.credentials.filter(i => i.id !== id);
        saveData();
        renderCredentials();
    }


    // --- DOCUMENTS ---
    function addDocument() {
        const title = document.getElementById('docTitle').value;
        const url = document.getElementById('docUrl').value;
        if(!title || !url) return;
        appData.documents.push({ id:Date.now(), title, url, icon: iconPaths[selectedIconIndex] });
        document.getElementById('docTitle').value = '';
        document.getElementById('docUrl').value = '';
        saveData();
        renderDocuments();
    }
    function renderDocuments() {
        const list = document.getElementById('documentsList');
        list.innerHTML = '';
        appData.documents.forEach(i => {
            const div = document.createElement('div');
            div.className = 'list-item';
            div.innerHTML = `
                <a href="${i.url}" target="_blank" class="link-content">
                    <div class="link-icon-box" style="background:transparent; border:1px solid #eee">${getSvg(i.icon)}</div>
                    <span>${i.title}</span>
                </a>
                <button class="btn-delete" onclick="delDoc(${i.id})">×</button>
            `;
            list.appendChild(div);
        });
    }
    function delDoc(id) {
        appData.documents = appData.documents.filter(i => i.id !== id);
        saveData();
        renderDocuments();
    }


    // --- IMP/EXP ---
    function updateEmailTemplate() {
        const date = new Date().toLocaleDateString('pt-BR');
        const txt = `Olá,\n\nSegue link/anexo com os dados atualizados em ${date}.\n\nSolicito que mantenha estas informações em sigilo absoluto.\n\nAtt.`;
        document.getElementById('emailTemplate').value = txt;
    }
    function copyEmail() {
        updateEmailTemplate();
        const el = document.getElementById('emailTemplate');
        el.select();
        document.execCommand('copy');
        alert("Texto copiado!");
    }
    function exportData() {
        const s = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(appData));
        const a = document.createElement('a');
        a.href = s; a.download = 'backup_dados.json';
        a.click();
    }
    function importData() {
        const file = document.getElementById('importFile').files[0];
        if(!file) return;
        const r = new FileReader();
        r.onload = (e) => {
            try {
                appData = JSON.parse(e.target.result);
                saveData();
                renderAll();
                alert("Restaurado com sucesso.");
            } catch(x){ alert("Erro no arquivo."); }
        };
        r.readAsText(file);
    }


</script>
</body>
</html>